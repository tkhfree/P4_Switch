// Autogenerated file (from src/hardware_indep/dataplane.c.py via hardware_indep/dataplane.c.py), do not modify directly.
// Generator: T4P4S (https://github.com/P4ELTE/t4p4s/)

 #include <stdlib.h> // src/hardware_indep/dataplane.c.py:18
 #include <string.h> // src/hardware_indep/dataplane.c.py:19
 #include <stdbool.h> // src/hardware_indep/dataplane.c.py:20
 #include "dpdk_lib.h" // src/hardware_indep/dataplane.c.py:21
 #include "actions.h" // src/hardware_indep/dataplane.c.py:22
 #include "backend.h" // src/hardware_indep/dataplane.c.py:23
 #include "util.h" // src/hardware_indep/dataplane.c.py:24
 #include "util_packet.h" // src/hardware_indep/dataplane.c.py:25
 #include "tables.h" // src/hardware_indep/dataplane.c.py:26

 uint8_t* emit_addr; // src/hardware_indep/dataplane.c.py:28
 uint32_t ingress_pkt_len; // src/hardware_indep/dataplane.c.py:29

 extern ctrl_plane_backend bg; // src/hardware_indep/dataplane.c.py:31
 extern char* action_names[]; // src/hardware_indep/dataplane.c.py:32

 extern void parse_packet(STDPARAMS); // src/hardware_indep/dataplane.c.py:34
 extern void increase_counter(int counterid, int index); // src/hardware_indep/dataplane.c.py:35
 extern void set_handle_packet_metadata(packet_descriptor_t* pd, uint32_t portid); // src/hardware_indep/dataplane.c.py:36

 uint8_t reverse_buffer[6]; // src/hardware_indep/dataplane.c.py:40

 struct apply_result_s { // src/hardware_indep/dataplane.c.py:62
     bool hit; // src/hardware_indep/dataplane.c.py:63
     enum actions action_run; // src/hardware_indep/dataplane.c.py:64
 }; // src/hardware_indep/dataplane.c.py:65

 void control_verifyChecksum(STDPARAMS); // src/hardware_indep/dataplane.c.py:68
 void control_ingress(STDPARAMS); // src/hardware_indep/dataplane.c.py:68
 struct apply_result_s dmac_0_apply(STDPARAMS); // src/hardware_indep/dataplane.c.py:70
 struct apply_result_s smac_0_apply(STDPARAMS); // src/hardware_indep/dataplane.c.py:70
 void control_egress(STDPARAMS); // src/hardware_indep/dataplane.c.py:68
 void control_computeChecksum(STDPARAMS); // src/hardware_indep/dataplane.c.py:68
 void control_DeparserImpl(STDPARAMS); // src/hardware_indep/dataplane.c.py:68

 void table_dmac_0_key(packet_descriptor_t* pd, uint8_t* key) { // src/hardware_indep/dataplane.c.py:88
 EXTRACT_BYTEBUF_PACKET(pd, header_instance_ethernet, field_ethernet_t_dstAddr, key) // src/hardware_indep/dataplane.c.py:112
 key += 6; // src/hardware_indep/dataplane.c.py:113
 } // src/hardware_indep/dataplane.c.py:122
 void table_smac_0_key(packet_descriptor_t* pd, uint8_t* key) { // src/hardware_indep/dataplane.c.py:88
 EXTRACT_BYTEBUF_PACKET(pd, header_instance_ethernet, field_ethernet_t_srcAddr, key) // src/hardware_indep/dataplane.c.py:112
 key += 6; // src/hardware_indep/dataplane.c.py:113
 } // src/hardware_indep/dataplane.c.py:122

 struct apply_result_s dmac_0_apply(STDPARAMS) // src/hardware_indep/dataplane.c.py:142
 { // src/hardware_indep/dataplane.c.py:143
     uint8_t* key[6]; // src/hardware_indep/dataplane.c.py:145
     table_dmac_0_key(pd, (uint8_t*)key); // src/hardware_indep/dataplane.c.py:146
     dbg_bytes(key, table_config[TABLE_dmac_0].entry.key_size, // src/hardware_indep/dataplane.c.py:148
               " " T4LIT(????,table) " Table lookup " T4LIT(dmac_0,table) "/" T4LIT(EXACT) "/" T4LIT(%d) ": %s", // src/hardware_indep/dataplane.c.py:149
               6, // src/hardware_indep/dataplane.c.py:150
               6 == 0 ? "" T4LIT((empty key),bytes) "" : ""); // src/hardware_indep/dataplane.c.py:151
     table_entry_dmac_0_t* entry = (table_entry_dmac_0_t*)exact_lookup(tables[TABLE_dmac_0], (uint8_t*)key); // src/hardware_indep/dataplane.c.py:153
     bool hit = entry != NULL && entry->is_entry_valid != INVALID_TABLE_ENTRY; // src/hardware_indep/dataplane.c.py:154
     debug("   " T4LIT(??,table) " Lookup " T4LIT(%s,success) ": " T4LIT(%s,action) "%s\n", // src/hardware_indep/dataplane.c.py:156
               hit ? "hit" : "miss", // src/hardware_indep/dataplane.c.py:157
               entry == NULL ? "(no action)" : action_names[entry->action.action_id], // src/hardware_indep/dataplane.c.py:158
               hit ? "" : " (default)"); // src/hardware_indep/dataplane.c.py:159
     if (likely(hit)) { // src/hardware_indep/dataplane.c.py:161
         // applying direct counters and meters
    } // src/hardware_indep/dataplane.c.py:170
     if (likely(entry != 0)) { // src/hardware_indep/dataplane.c.py:190
       switch (entry->action.action_id) { // src/hardware_indep/dataplane.c.py:191
         case action_forward: // src/hardware_indep/dataplane.c.py:196
           action_code_forward(SHORT_STDPARAMS_IN, entry->action.forward_params); // src/hardware_indep/dataplane.c.py:197
           break; // src/hardware_indep/dataplane.c.py:198
         case action_bcast: // src/hardware_indep/dataplane.c.py:196
           action_code_bcast(SHORT_STDPARAMS_IN, entry->action.bcast_params); // src/hardware_indep/dataplane.c.py:197
           break; // src/hardware_indep/dataplane.c.py:198
         case action_NoAction_0: // src/hardware_indep/dataplane.c.py:196
           action_code_NoAction_0(SHORT_STDPARAMS_IN, entry->action.NoAction_0_params); // src/hardware_indep/dataplane.c.py:197
           break; // src/hardware_indep/dataplane.c.py:198
       } // src/hardware_indep/dataplane.c.py:199
     } // src/hardware_indep/dataplane.c.py:200
     struct apply_result_s apply_result = { hit, hit ? entry->action.action_id : -1 }; // src/hardware_indep/dataplane.c.py:202
     return apply_result; // src/hardware_indep/dataplane.c.py:203
 } // src/hardware_indep/dataplane.c.py:204
 struct apply_result_s smac_0_apply(STDPARAMS) // src/hardware_indep/dataplane.c.py:142
 { // src/hardware_indep/dataplane.c.py:143
     uint8_t* key[6]; // src/hardware_indep/dataplane.c.py:145
     table_smac_0_key(pd, (uint8_t*)key); // src/hardware_indep/dataplane.c.py:146
     dbg_bytes(key, table_config[TABLE_smac_0].entry.key_size, // src/hardware_indep/dataplane.c.py:148
               " " T4LIT(????,table) " Table lookup " T4LIT(smac_0,table) "/" T4LIT(EXACT) "/" T4LIT(%d) ": %s", // src/hardware_indep/dataplane.c.py:149
               6, // src/hardware_indep/dataplane.c.py:150
               6 == 0 ? "" T4LIT((empty key),bytes) "" : ""); // src/hardware_indep/dataplane.c.py:151
     table_entry_smac_0_t* entry = (table_entry_smac_0_t*)exact_lookup(tables[TABLE_smac_0], (uint8_t*)key); // src/hardware_indep/dataplane.c.py:153
     bool hit = entry != NULL && entry->is_entry_valid != INVALID_TABLE_ENTRY; // src/hardware_indep/dataplane.c.py:154
     debug("   " T4LIT(??,table) " Lookup " T4LIT(%s,success) ": " T4LIT(%s,action) "%s\n", // src/hardware_indep/dataplane.c.py:156
               hit ? "hit" : "miss", // src/hardware_indep/dataplane.c.py:157
               entry == NULL ? "(no action)" : action_names[entry->action.action_id], // src/hardware_indep/dataplane.c.py:158
               hit ? "" : " (default)"); // src/hardware_indep/dataplane.c.py:159
     if (likely(hit)) { // src/hardware_indep/dataplane.c.py:161
         // applying direct counters and meters
    } // src/hardware_indep/dataplane.c.py:170
     if (likely(entry != 0)) { // src/hardware_indep/dataplane.c.py:190
       switch (entry->action.action_id) { // src/hardware_indep/dataplane.c.py:191
         case action_mac_learn: // src/hardware_indep/dataplane.c.py:196
           action_code_mac_learn(SHORT_STDPARAMS_IN, entry->action.mac_learn_params); // src/hardware_indep/dataplane.c.py:197
           break; // src/hardware_indep/dataplane.c.py:198
         case action__nop: // src/hardware_indep/dataplane.c.py:196
           action_code__nop(SHORT_STDPARAMS_IN, entry->action._nop_params); // src/hardware_indep/dataplane.c.py:197
           break; // src/hardware_indep/dataplane.c.py:198
         case action_NoAction_3: // src/hardware_indep/dataplane.c.py:196
           action_code_NoAction_3(SHORT_STDPARAMS_IN, entry->action.NoAction_3_params); // src/hardware_indep/dataplane.c.py:197
           break; // src/hardware_indep/dataplane.c.py:198
       } // src/hardware_indep/dataplane.c.py:199
     } // src/hardware_indep/dataplane.c.py:200
     struct apply_result_s apply_result = { hit, hit ? entry->action.action_id : -1 }; // src/hardware_indep/dataplane.c.py:202
     return apply_result; // src/hardware_indep/dataplane.c.py:203
 } // src/hardware_indep/dataplane.c.py:204

 void reset_headers(SHORT_STDPARAMS) { // src/hardware_indep/dataplane.c.py:209
 pd->headers[header_instance_ethernet].pointer = NULL; // src/hardware_indep/dataplane.c.py:212
     // reset metadatas
     memset(pd->headers[header_instance_all_metadatas].pointer, 0, header_info(header_instance_all_metadatas).bytewidth * sizeof(uint8_t)); // src/hardware_indep/dataplane.c.py:215
 } // src/hardware_indep/dataplane.c.py:216

 void init_headers(SHORT_STDPARAMS) { // src/hardware_indep/dataplane.c.py:218
 pd->headers[header_instance_ethernet] = (header_descriptor_t) // src/hardware_indep/dataplane.c.py:221
 { // src/hardware_indep/dataplane.c.py:222
     .type = header_instance_ethernet, // src/hardware_indep/dataplane.c.py:223
     .length = header_info(header_instance_ethernet).bytewidth, // src/hardware_indep/dataplane.c.py:224
     .pointer = NULL, // src/hardware_indep/dataplane.c.py:225
     .var_width_field_bitwidth = 0, // src/hardware_indep/dataplane.c.py:226
 #ifdef T4P4S_DEBUG // src/hardware_indep/dataplane.c.py:227
     .name = "ethernet", // src/hardware_indep/dataplane.c.py:228
 #endif // src/hardware_indep/dataplane.c.py:229
 }; // src/hardware_indep/dataplane.c.py:230
     // init metadatas
     pd->headers[header_instance_all_metadatas] = (header_descriptor_t) // src/hardware_indep/dataplane.c.py:233
     { // src/hardware_indep/dataplane.c.py:234
         .type = header_instance_all_metadatas, // src/hardware_indep/dataplane.c.py:235
         .length = header_info(header_instance_all_metadatas).bytewidth, // src/hardware_indep/dataplane.c.py:236
         .pointer = malloc(header_info(header_instance_all_metadatas).bytewidth * sizeof(uint8_t)), // src/hardware_indep/dataplane.c.py:237
         .var_width_field_bitwidth = 0 // src/hardware_indep/dataplane.c.py:238
     }; // src/hardware_indep/dataplane.c.py:239
 } // src/hardware_indep/dataplane.c.py:240

 void init_keyless_tables() { // src/hardware_indep/dataplane.c.py:251
 } // src/hardware_indep/dataplane.c.py:258

 void init_dataplane(SHORT_STDPARAMS) { // src/hardware_indep/dataplane.c.py:262
     init_headers(SHORT_STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:263
     reset_headers(SHORT_STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:264
     init_keyless_tables(); // src/hardware_indep/dataplane.c.py:265

     uint32_t res32; // src/hardware_indep/dataplane.c.py:267
     MODIFY_INT32_INT32_BITS_PACKET(pd, header_instance_all_metadatas, field_standard_metadata_t_drop, false); // src/hardware_indep/dataplane.c.py:268
 } // src/hardware_indep/dataplane.c.py:269

 void update_packet(packet_descriptor_t* pd) { // src/hardware_indep/dataplane.c.py:271
     uint32_t value32, res32; // src/hardware_indep/dataplane.c.py:272
     (void)value32, (void)res32; // src/hardware_indep/dataplane.c.py:273
 
 // updating header instance ethernet
 if(pd->fields.attr_field_instance_ethernet_etherType == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_ethernet_etherType; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_ethernet_etherType, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_ethernet, field_ethernet_t_etherType}}, 0, value32, 16);
 } // src/hardware_indep/dataplane.c.py:287
 
 // updating header instance standard_metadata
 if(pd->fields.attr_field_instance_standard_metadata_ingress_port == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_ingress_port; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_ingress_port, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_ingress_port}}, 0, value32, 9);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_egress_spec == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_egress_spec; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_egress_spec, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_egress_spec}}, 0, value32, 9);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_egress_port == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_egress_port; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_egress_port, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_egress_port}}, 0, value32, 9);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_instance_type == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_instance_type; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_instance_type, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_instance_type}}, 0, value32, 32);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_packet_length == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_packet_length; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_packet_length, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_packet_length}}, 0, value32, 32);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_enq_timestamp == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_enq_timestamp; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_enq_timestamp, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_enq_timestamp}}, 0, value32, 32);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_enq_qdepth == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_enq_qdepth; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_enq_qdepth, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_enq_qdepth}}, 0, value32, 19);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_deq_timedelta == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_deq_timedelta; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_deq_timedelta, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_deq_timedelta}}, 0, value32, 32);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_deq_qdepth == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_deq_qdepth; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_deq_qdepth, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_deq_qdepth}}, 0, value32, 19);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_mcast_grp == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_mcast_grp; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_mcast_grp, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_mcast_grp}}, 0, value32, 16);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_egress_rid == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_egress_rid; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_egress_rid, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_egress_rid}}, 0, value32, 16);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_checksum_error == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_checksum_error; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_checksum_error, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_checksum_error}}, 0, value32, 1);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_parser_error == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_parser_error; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_parser_error, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_parser_error}}, 0, value32, 3);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_priority == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_priority; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_priority, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_priority}}, 0, value32, 3);
 } // src/hardware_indep/dataplane.c.py:287
 if(pd->fields.attr_field_instance_standard_metadata_drop == MODIFIED) { // src/hardware_indep/dataplane.c.py:283
     value32 = pd->fields.field_instance_standard_metadata_drop; // src/hardware_indep/dataplane.c.py:284
     MODIFY_INT32_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_instance_standard_metadata_drop, value32); // src/hardware_indep/dataplane.c.py:285
     // set_field((fldT[]){{pd, header_instance_standard_metadata, field_standard_metadata_t_drop}}, 0, value32, 1);
 } // src/hardware_indep/dataplane.c.py:287
 
 // updating header instance meta
 } // src/hardware_indep/dataplane.c.py:288

 extern void /* src/utils/codegen.sugar.py:45 */ verify(bool /* src/utils/codegen.sugar.py:47 */ check, enum error_error /* src/utils/codegen.sugar.py:63 */ toSignal, SHORT_STDPARAMS); // src/hardware_indep/dataplane.c.py:325
 extern void /* src/utils/codegen.sugar.py:45 */ digest(uint32_t receiver, struct uint8_buffer_s data, SHORT_STDPARAMS); // src/hardware_indep/dataplane.c.py:325
 void control_verifyChecksum(STDPARAMS) // src/hardware_indep/dataplane.c.py:328
 { // src/hardware_indep/dataplane.c.py:329
     debug("Entering control " T4LIT(verifyChecksum,control) "...\n"); // src/hardware_indep/dataplane.c.py:330
     uint32_t value32, res32; // src/hardware_indep/dataplane.c.py:331
     (void)value32, (void)res32; // src/hardware_indep/dataplane.c.py:332
     control_locals_verifyChecksum_t local_vars_struct; // src/hardware_indep/dataplane.c.py:333
     control_locals_verifyChecksum_t* local_vars = &local_vars_struct; // src/hardware_indep/dataplane.c.py:334
     pd->control_locals = (void*) local_vars; // src/hardware_indep/dataplane.c.py:335
 } // src/hardware_indep/dataplane.c.py:337
 void control_ingress(STDPARAMS) // src/hardware_indep/dataplane.c.py:328
 { // src/hardware_indep/dataplane.c.py:329
     debug("Entering control " T4LIT(ingress,control) "...\n"); // src/hardware_indep/dataplane.c.py:330
     uint32_t value32, res32; // src/hardware_indep/dataplane.c.py:331
     (void)value32, (void)res32; // src/hardware_indep/dataplane.c.py:332
     control_locals_ingress_t local_vars_struct; // src/hardware_indep/dataplane.c.py:333
     control_locals_ingress_t* local_vars = &local_vars_struct; // src/hardware_indep/dataplane.c.py:334
     pd->control_locals = (void*) local_vars; // src/hardware_indep/dataplane.c.py:335
  smac_0_apply(STDPARAMS_IN) // src/utils/codegen.sugar.py:811
; // src/utils/codegen.sugar.py:522
  dmac_0_apply(STDPARAMS_IN) // src/utils/codegen.sugar.py:811
; // src/utils/codegen.sugar.py:522
 } // src/hardware_indep/dataplane.c.py:337
 void control_egress(STDPARAMS) // src/hardware_indep/dataplane.c.py:328
 { // src/hardware_indep/dataplane.c.py:329
     debug("Entering control " T4LIT(egress,control) "...\n"); // src/hardware_indep/dataplane.c.py:330
     uint32_t value32, res32; // src/hardware_indep/dataplane.c.py:331
     (void)value32, (void)res32; // src/hardware_indep/dataplane.c.py:332
     control_locals_egress_t local_vars_struct; // src/hardware_indep/dataplane.c.py:333
     control_locals_egress_t* local_vars = &local_vars_struct; // src/hardware_indep/dataplane.c.py:334
     pd->control_locals = (void*) local_vars; // src/hardware_indep/dataplane.c.py:335
 } // src/hardware_indep/dataplane.c.py:337
 void control_computeChecksum(STDPARAMS) // src/hardware_indep/dataplane.c.py:328
 { // src/hardware_indep/dataplane.c.py:329
     debug("Entering control " T4LIT(computeChecksum,control) "...\n"); // src/hardware_indep/dataplane.c.py:330
     uint32_t value32, res32; // src/hardware_indep/dataplane.c.py:331
     (void)value32, (void)res32; // src/hardware_indep/dataplane.c.py:332
     control_locals_computeChecksum_t local_vars_struct; // src/hardware_indep/dataplane.c.py:333
     control_locals_computeChecksum_t* local_vars = &local_vars_struct; // src/hardware_indep/dataplane.c.py:334
     pd->control_locals = (void*) local_vars; // src/hardware_indep/dataplane.c.py:335
 } // src/hardware_indep/dataplane.c.py:337
 void control_DeparserImpl(STDPARAMS) // src/hardware_indep/dataplane.c.py:328
 { // src/hardware_indep/dataplane.c.py:329
     debug("Entering control " T4LIT(DeparserImpl,control) "...\n"); // src/hardware_indep/dataplane.c.py:330
     uint32_t value32, res32; // src/hardware_indep/dataplane.c.py:331
     (void)value32, (void)res32; // src/hardware_indep/dataplane.c.py:332
     control_locals_DeparserImpl_t local_vars_struct; // src/hardware_indep/dataplane.c.py:333
     control_locals_DeparserImpl_t* local_vars = &local_vars_struct; // src/hardware_indep/dataplane.c.py:334
     pd->control_locals = (void*) local_vars; // src/hardware_indep/dataplane.c.py:335
 pd->header_reorder[pd->emit_hdrinst_count] = header_instance_ethernet; // src/utils/codegen.sugar.py:519
 ++pd->emit_hdrinst_count; // src/utils/codegen.sugar.py:520
 } // src/hardware_indep/dataplane.c.py:337
 void process_packet(STDPARAMS) // src/hardware_indep/dataplane.c.py:339
 { // src/hardware_indep/dataplane.c.py:340
 control_verifyChecksum(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:343
 control_ingress(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:343
 transfer_to_egress(pd); // src/hardware_indep/dataplane.c.py:345
 control_egress(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:343
 // TODO temporarily disabled
 // update_packet(pd); // we need to update the packet prior to calculating the new checksum
 control_computeChecksum(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:343
 control_DeparserImpl(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:343
 } // src/hardware_indep/dataplane.c.py:350

 void store_headers_for_emit(STDPARAMS) // src/hardware_indep/dataplane.c.py:358
 { // src/hardware_indep/dataplane.c.py:359
     debug("   :: Preparing " T4LIT(%d) " header instances for storage...\n", pd->emit_hdrinst_count); // src/hardware_indep/dataplane.c.py:360

     pd->emit_headers_length = 0; // src/hardware_indep/dataplane.c.py:362
     for (int i = 0; i < pd->emit_hdrinst_count; ++i) { // src/hardware_indep/dataplane.c.py:363
         header_descriptor_t hdr = pd->headers[pd->header_reorder[i]]; // src/hardware_indep/dataplane.c.py:364

         #if T4P4S_EMIT != 1 // src/hardware_indep/dataplane.c.py:367
             if (unlikely(hdr.pointer == NULL)) { // src/hardware_indep/dataplane.c.py:368
                 debug("        : " T4LIT(#%d) " " T4LIT(%8s,header) "/" T4LIT(%02d) " = " T4LIT(skipping invalid header,warning) "\n", pd->header_reorder[i] + 1, hdr.name, hdr.length); // src/hardware_indep/dataplane.c.py:369
                 continue; // src/hardware_indep/dataplane.c.py:370
             } // src/hardware_indep/dataplane.c.py:371
         #endif // src/hardware_indep/dataplane.c.py:372

         if (likely(hdr.was_enabled_at_initial_parse)) { // src/hardware_indep/dataplane.c.py:374
             dbg_bytes(hdr.pointer, hdr.length, "        : " T4LIT(#%d) " " T4LIT(%8s,header) "/" T4LIT(%02d) " = %s", pd->header_reorder[i] + 1, hdr.name, hdr.length, hdr.pointer == NULL ? T4LIT((invalid),warning) " " : ""); // src/hardware_indep/dataplane.c.py:375
             memcpy(pd->header_tmp_storage + header_instance_infos[hdr.type].byte_offset, hdr.pointer, hdr.length); // src/hardware_indep/dataplane.c.py:376
         } else { // src/hardware_indep/dataplane.c.py:377
             debug("        : " T4LIT(#%d) " " T4LIT(%8s,header) "/" T4LIT(%02d) " was created in-place (not present at ingress)\n", pd->header_reorder[i] + 1, hdr.name, hdr.length); // src/hardware_indep/dataplane.c.py:378
         } // src/hardware_indep/dataplane.c.py:379

         pd->emit_headers_length += hdr.length; // src/hardware_indep/dataplane.c.py:381
     } // src/hardware_indep/dataplane.c.py:382
 } // src/hardware_indep/dataplane.c.py:383

 void resize_packet_on_emit(STDPARAMS) // src/hardware_indep/dataplane.c.py:385
 { // src/hardware_indep/dataplane.c.py:386
     if (likely(pd->emit_headers_length == pd->parsed_length)) { // src/hardware_indep/dataplane.c.py:387
         debug(" " T4LIT(::::,status) " Skipping packet resizing: no change in total packet header length\n"); // src/hardware_indep/dataplane.c.py:388
         return; // src/hardware_indep/dataplane.c.py:389
     } // src/hardware_indep/dataplane.c.py:390

     if (likely(pd->emit_headers_length > pd->parsed_length)) { // src/hardware_indep/dataplane.c.py:392
         int len_change = pd->emit_headers_length - pd->parsed_length; // src/hardware_indep/dataplane.c.py:393
         debug("   " T4LIT(::,status) " Adding   " T4LIT(%02d) " bytes %8s   : (header: from " T4LIT(%d) " bytes to " T4LIT(%d) " bytes)\n", len_change, "to packet", pd->parsed_length, pd->emit_headers_length); // src/hardware_indep/dataplane.c.py:394
         char* new_ptr = rte_pktmbuf_prepend(pd->wrapper, len_change); // src/hardware_indep/dataplane.c.py:395
         if (unlikely(new_ptr == 0)) { // src/hardware_indep/dataplane.c.py:396
             rte_exit(1, "Could not reserve necessary headroom (" T4LIT(%d) " additional bytes)", len_change); // src/hardware_indep/dataplane.c.py:397
         } // src/hardware_indep/dataplane.c.py:398
         pd->data = (packet_data_t*)new_ptr; // src/hardware_indep/dataplane.c.py:399
     } else { // src/hardware_indep/dataplane.c.py:400
         int len_change = pd->parsed_length - pd->emit_headers_length; // src/hardware_indep/dataplane.c.py:401
         debug("   " T4LIT(::,status) " Removing " T4LIT(%02d) " bytes %8s  : (header: from " T4LIT(%d) " bytes to " T4LIT(%d) " bytes)\n", len_change, "from packet", pd->parsed_length, pd->emit_headers_length); // src/hardware_indep/dataplane.c.py:402
         char* new_ptr = rte_pktmbuf_adj(pd->wrapper, len_change); // src/hardware_indep/dataplane.c.py:403
         pd->data = (packet_data_t*)new_ptr; // src/hardware_indep/dataplane.c.py:404
     } // src/hardware_indep/dataplane.c.py:405
     pd->wrapper->pkt_len = pd->emit_headers_length + pd->payload_length; // src/hardware_indep/dataplane.c.py:406
 } // src/hardware_indep/dataplane.c.py:407

 // if (some of) the emitted headers are one after another, this function copies them in one go
 void copy_emit_contents(STDPARAMS) // src/hardware_indep/dataplane.c.py:410
 { // src/hardware_indep/dataplane.c.py:411
     debug("   :: Putting together packet\n"); // src/hardware_indep/dataplane.c.py:412
     uint8_t* dst_start = rte_pktmbuf_mtod(pd->wrapper, uint8_t*); // src/hardware_indep/dataplane.c.py:413
     uint8_t* dst = dst_start; // src/hardware_indep/dataplane.c.py:414
     for (int idx = 0; idx < pd->emit_hdrinst_count; ) { // src/hardware_indep/dataplane.c.py:415
         #ifdef T4P4S_DEBUG // src/hardware_indep/dataplane.c.py:416
             char header_names_txt[1024]; // src/hardware_indep/dataplane.c.py:417
             char* header_names_ptr = header_names_txt; // src/hardware_indep/dataplane.c.py:418
         #endif // src/hardware_indep/dataplane.c.py:419
         header_descriptor_t hdr = pd->headers[pd->header_reorder[idx]]; // src/hardware_indep/dataplane.c.py:420
         uint8_t* copy_start     = hdr.pointer; // src/hardware_indep/dataplane.c.py:421
         int copy_start_idx      = idx; // src/hardware_indep/dataplane.c.py:422
         int copy_length         = hdr.length; // src/hardware_indep/dataplane.c.py:423
         int count               = 1; // src/hardware_indep/dataplane.c.py:424
         #ifdef T4P4S_DEBUG // src/hardware_indep/dataplane.c.py:425
             header_names_ptr += sprintf(header_names_ptr, " " T4LIT(%s,header), hdr.name); // src/hardware_indep/dataplane.c.py:426
         #endif // src/hardware_indep/dataplane.c.py:427
         ++idx; // src/hardware_indep/dataplane.c.py:428
         while (idx < pd->emit_hdrinst_count && pd->headers[pd->header_reorder[idx]].pointer == hdr.pointer + hdr.length) { // src/hardware_indep/dataplane.c.py:429
             ++count; // src/hardware_indep/dataplane.c.py:430
             hdr = pd->headers[pd->header_reorder[idx]]; // src/hardware_indep/dataplane.c.py:431
             copy_length += hdr.length; // src/hardware_indep/dataplane.c.py:432
             ++idx; // src/hardware_indep/dataplane.c.py:433
             #ifdef T4P4S_DEBUG // src/hardware_indep/dataplane.c.py:434
                 header_names_ptr += sprintf(header_names_ptr, " " T4LIT(%s,header), hdr.name); // src/hardware_indep/dataplane.c.py:435
             #endif // src/hardware_indep/dataplane.c.py:436
         } // src/hardware_indep/dataplane.c.py:437
         dbg_bytes(copy_start, copy_length, "    : Copying " T4LIT(%d) " %s to byte " T4LIT(#%ld) " of egress header, " T4LIT(%d) " bytes: %s: ", count, count == 1 ? "header" : "adjacent headers", dst - dst_start, copy_length, header_names_txt); // src/hardware_indep/dataplane.c.py:438
         memcpy(dst, copy_start, copy_length); // src/hardware_indep/dataplane.c.py:439
         dst += copy_length; // src/hardware_indep/dataplane.c.py:440
     } // src/hardware_indep/dataplane.c.py:441
 } // src/hardware_indep/dataplane.c.py:442

 void emit_packet(STDPARAMS) // src/hardware_indep/dataplane.c.py:444
 { // src/hardware_indep/dataplane.c.py:445
     if (unlikely(pd->is_emit_reordering)) { // src/hardware_indep/dataplane.c.py:446
         if (unlikely(GET_INT32_AUTO_PACKET(pd, header_instance_all_metadatas, field_standard_metadata_t_drop))) { // src/hardware_indep/dataplane.c.py:447
             debug(" " T4LIT(::::,status) " Skipping pre-emit processing: packet is " T4LIT(dropped,status) "\n"); // src/hardware_indep/dataplane.c.py:448
             return; // src/hardware_indep/dataplane.c.py:449
         } // src/hardware_indep/dataplane.c.py:450
         debug(" :::: Pre-emit reordering\n"); // src/hardware_indep/dataplane.c.py:451
         store_headers_for_emit(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:452
         resize_packet_on_emit(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:453
         copy_emit_contents(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:454
     } else { // src/hardware_indep/dataplane.c.py:455
         debug(" " T4LIT(::::,status) " Skipping pre-emit processing: no change in packet header structure\n"); // src/hardware_indep/dataplane.c.py:456
     } // src/hardware_indep/dataplane.c.py:457
 } // src/hardware_indep/dataplane.c.py:458

 void handle_packet(STDPARAMS, uint32_t portid) // src/hardware_indep/dataplane.c.py:460
 { // src/hardware_indep/dataplane.c.py:461
     int value32; // src/hardware_indep/dataplane.c.py:462
     int res32; // src/hardware_indep/dataplane.c.py:463

     reset_headers(SHORT_STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:465
     set_handle_packet_metadata(pd, portid); // src/hardware_indep/dataplane.c.py:466

     dbg_bytes(pd->data, packet_length(pd), "Handling packet (port " T4LIT(%d,port) ", " T4LIT(%02d) " bytes)  : ", extract_ingress_port(pd), packet_length(pd)); // src/hardware_indep/dataplane.c.py:468

     pd->parsed_length = 0; // src/hardware_indep/dataplane.c.py:470
     parse_packet(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:471

     emit_addr = pd->data; // src/hardware_indep/dataplane.c.py:473
     pd->emit_hdrinst_count = 0; // src/hardware_indep/dataplane.c.py:474
     pd->is_emit_reordering = false; // src/hardware_indep/dataplane.c.py:475

     process_packet(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:477

     emit_packet(STDPARAMS_IN); // src/hardware_indep/dataplane.c.py:479
 } // src/hardware_indep/dataplane.c.py:480
